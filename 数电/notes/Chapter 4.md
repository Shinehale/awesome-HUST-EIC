# Chapter 4 组合逻辑电路

前置知识

**香农展开定理**

任何一个逻辑函数 $f(X_1,X_2,\cdots,X_n)$可以分解为
$$
f(X_1,X_2,\cdots,X_n) = X_1 * f(0,X_2,\cdots,X_n) + X_1*f(1,X_2,\cdots,X_n)
$$

## 组合逻辑电路的分析

### 组合逻辑电路的定义

对于一个逻辑电路，其输出状态在任何时刻只取决于同一时刻的输入状态，而与电路原本状态无关，这样的电路定义称**组合逻辑电路**

一般用下面的函数来描述：
$$
L_i = f(A_1,A_2,A_3,\cdots,A_n) (i = 1,2,\cdots,m)
$$
并且具有以下特点：

- 输出输入没有反馈延迟通路
- 电路中不含有具有记忆功能的元件

### 组合逻辑电路的分析方法

- 根据逻辑电路，从输入到输出，写出各级逻辑函数表达式
- 将各逻辑函数表达式化简和变换，得到最简单的表达式
- 根据化简后的逻辑表达式列出真值表
- 根据真值表和简化后的逻辑表达式 对逻辑电路进行分析，最后确定其功能





## 组合逻辑电路的设计

### 组合逻辑电路的设计过程

- 明确实际问题的逻辑功能
- 根据对电路逻辑功能的要求，列出真值表
- 有真值表写出逻辑函数表达式
- 简化和变换逻辑表达式

### 组合逻辑电路的优化实现

优化的目的是：用指定芯片中特定资源实现逻辑函数，使电路的成本最低

逻辑电路的成本：电路中的总逻辑门数量加上所有逻辑门的输入端数来表示

#### 单输出电路

![3-1](img/3-1.jpg)

#### 多输出电路

![3-2](img/3-2.jpg)

#### 多级逻辑电路

##### 提取公因子

$$
L= ABCD+AB\bar{C}E+ABD\bar{F}
$$

![3-3](img/3-3.jpg)

##### 函数分解

对于逻辑函数
$$
L=\bar{A}BC + A\bar{B}C + ABD + \bar{A}\bar{B}D
$$
进行函数变换和分解得到：
$$
L = (\bar{A}B+A\bar{B})C + \bar{(\bar{A}B+ A\bar{B})}D
$$
![3-4](img/3-4.jpg)

![3-5](img/3-5.jpg)

## 组合逻辑电路中竞争和冒险

电路在信号电平变化瞬间，可能与稳态下的逻辑功能不一致，产生错误输出，这种现象就是电路中的竞争和冒险

### 产生竞争和冒险的原因

在一定条件下，当一个逻辑门的两个输入端信号同时向相反方向变化，而变化的时间有差异的现象，称为**竞争**

也就是说在一定条件下，**门电路输出端的逻辑表达式简化成两个互补的信号相乘或相加**，即$L = A * \bar{A}$ 或 $L = A +\bar{A}$。

由竞争而可能产生输出干扰脉冲的现象称为**冒险**

### 消去竞争-冒险的方法

- 发现并消去互补项
- 增加乘积项以避免互补项相加
- 输出端并联电容器



## 常用组合逻辑电路模块

### 编码器

#### 编码器的定义与功能

![3-6](img/3-6.jpg)

用一个二进制代码特定特定含义的信息称为 **编码**

具有编码功能的逻辑电路称为 **编码器**

编码器有普通编码器和优先编码器之分

#### 优先编码器

![3-7](img/3-7.png)

![3-8](img/3-8.png)

当 $E1 = 1$时，编码器工作；当$E1 = 0$时，禁止编码器工作，此时不管8个输入端为何种状态，3个输出端均为低电平，且$GS$和$E0$均为低电平。

#### 8-3优先编码器扩展

![3-9](img/3-9.jpg)

### 译码器/数据分配器

#### 译码器的定义与功能

**译码**是编码的逆过程，它的功能是将具有特定含义的二进制码转换成对应的输出信号，具有译码功能的逻辑电路是**译码器**

译码器分成两种类型

- 将一系列的代码转换成与之一一对应的有效信号
- 将一种代码转换成另一种代码

#### 二进制译码器

##### 二四线译码器

![3-10](img/3-10.jpg)

##### 3-8线译码器

![3-11](img/3-11.png)

![3-12](img/3-12.png)

#### 二-十进制译码器

![3-13](img/3-13.png)

#### 七段显示译码器

![3-14](img/3-14.png)

![3-15](img/3-15.png)

#### 数据分配器

**数据分配**是将公共数据线上的数据根据需要送到不同的通道上去，实现数据分配的逻辑电路称为 **数据分配器**

![3-16](img/3-16.jpg)

### 数据选择器

#### 数据选择器的定义与功能

**数据选择**是指经过选择，把多路数据中的某一路数据传送到公共数据线上，实现数据选择功能的逻辑电路称为**数据选择器** 

![3-17](img/3-17.png)

由图中可看出，被选数据源越多，所需选择输入端的位数也越多，若选择输入端为 $n$,则可选输入通道数为$2^n$

![3-18](img/3-18.png)

常用的数据选择器模块有

- 2选1数据选择器
- 4选1数据选择器
- 8选1数据选择器
- 16选1数据选择器

#### 用数据选择器构成查找表$LUT$

$LUT$实质是一个小规模的存储器，第一级的数据输入端接存储单元，每个存储单元可以存放一个逻辑值 0 或 1 ，要数据选择器扩展方法可以得到 4 输入的$LUT$，这时输入端需要16个存储单元。

![3-19](img/3-19.png)

#### 用数据选择器构成移位器

##### 基本移位器

![3-20](img/3-20.png)

##### 桶形移位器

能将数据移动多位，一处为被放置在右边（左移时）或左边（右移时），且能进行循环移位，具备这样功能的电路称为桶形移位器(barrel shifter)

![3-21](img/3-21.png)

![3-22](img/3-22.png)

### 数值比较器

#### 数值比较器的定义和功能

**数值比较器**就是对两个二进制数 A 、B进行比较的逻辑电路，比较结果有 $A<B,A = B,A >B$三种情况

##### 一位数值比较器

![3-23](img/3-23.png)

通过真值表和逻辑表达式可以得到逻辑图：

![3-24](img/3-24.png)

##### 两位比较器

![3-25](img/3-25.png)

![3-26](img/3-26.png)

#### 四位数值比较器及扩展

数值比较器的扩展有串联和并联两种方式

##### 串联方式下

![3-27](img/3-27.png)

##### 并联方式下

![3-28](img/3-28.png)



### 算术运算电路

算数运算是数字系统的基本功能

#### 半加器和全加器

半加器和全加器是算数运算电路中的基本单元，他们是完成1位二进制数相加的一种组合逻辑电路

##### 半加器

只考虑两个加数本身，而没有考虑低位进位的加法运算，称为**半加**，实现半加运算的逻辑电路称为**半加器**

![3-29](img/3-29.png)

![3-30](img/3-30.png)

##### 全加器

完成被加数、加数和来自低位的进位信号相加，并且根据求和结果给出该位进位信号的运算称为**全加**，实现全加运算的电路称为**全加器**

![3-31](img/3-31.png)

![3-32](img/3-32.png)



#### 多位数加法器

##### 串行进位加法器

![3-33](img/3-33.jpg)

![3-34](img/3-34.jpg)

##### 超前进位加法器

![3-35](img/3-35.png)



![3-36](img/3-36.png)

#### 减法运算

若二进制的原码位$N_源$，则它相对应的补码为$N_补 = 2^n - N_原$

补码与反码的关系式为 $N_补 = N_反 + 1$

设A 、 B 两个数相减，则有
$$
A - B = A + B_补 - 2^n = A + B_反 + 1 - 2^n
$$
![3-37](img/3-37.png)



## 组合逻辑电路设计小结

1. 根据实际逻辑问题**确定输入，输出变量**，并定义逻辑状态的含义；
2. 根据输入，输出的因果关系，**列出真值表**
3. 由真值表**写出逻辑表达式**，根据需要**简化**和**变换**逻辑表达式
4. 画出**逻辑图**







